# üîê Secure REST API ‚Äî Laboratory Work ‚Ññ3

## üìñ –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É
–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î **–∑–∞—Ö–∏—â–µ–Ω–µ REST API** –Ω–∞ –±–∞–∑—ñ **Node.js** —Ç–∞ **Express**, —è–∫–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –æ—Å–Ω–æ–≤–∏ –ø–æ–±—É–¥–æ–≤–∏ —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ —ñ–∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é:
- CRUD-–æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞–¥ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (–¥–æ–∫—É–º–µ–Ω—Ç–∏, —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∏);
- **–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ –ª–æ–≥—ñ–Ω–æ–º —ñ –ø–∞—Ä–æ–ª–µ–º;
- **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó** –∑–∞ —Ä–æ–ª—è–º–∏ (`user` / `admin`);
- **–ª–æ–≥—É–≤–∞–Ω–Ω—è** –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤ —á–µ—Ä–µ–∑ middleware;
- **—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Postman —ñ Node.js-—Å–∫—Ä–∏–ø—Ç–∞.

–ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏ ‚Äî –∑–∞–∫—Ä—ñ–ø–∏—Ç–∏ –Ω–∞–≤–∏—á–∫–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –∑–∞—Ö–∏—Å—Ç—É —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è RESTful API —Ç–∞ —Ä–æ–±–æ—Ç–∏ –∑ middleware —É Express.

---

## ‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone https://github.com/<YourUsername>/secure-api-lab.git
cd secure-api-lab

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
npm start

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
npm test
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑–∞ –∞–¥—Ä–µ—Å–æ—é:  
üëâ http://localhost:3000

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
‚îú‚îÄ data.js          # "–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö" –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
‚îú‚îÄ server.js        # –û—Å–Ω–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä, –º–∞—Ä—à—Ä—É—Ç–∏, middleware
‚îú‚îÄ test-client.js   # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
‚îú‚îÄ .gitignore       # –Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è node_modules —Ç–∞ —Å–ª—É–∂–±–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
‚îî‚îÄ package.json     # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø–∞–∫–µ—Ç–∞ (–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, —Å–∫—Ä–∏–ø—Ç–∏)
```

---

## üß© –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

| ‚Ññ | –ï—Ç–∞–ø | –û–ø–∏—Å | –ö–æ–º—ñ—Ç |
|:-:|:------|:------|:------|
| 1 | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É | Express-—Å–µ—Ä–≤–µ—Ä ‚ÄúHello World‚Äù | `feat: Initial server setup` |
| 2 | –ë–∞–∑–æ–≤–µ API | CRUD –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ | `feat: Implement basic API endpoints` |
| 3 | –ë–µ–∑–ø–µ–∫–∞ | Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó | `feat: Implement authentication and authorization middleware` |
| 4 | –õ–æ–≥—É–≤–∞–Ω–Ω—è | Middleware, —â–æ —Ñ—ñ–∫—Å—É—î –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç | `feat: Implement request logging middleware` |
| 5 | –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è | –¢–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ Postman —Ç–∞ Node.js | `feat: Complete final testing of the API` |

---

## üß† –û–ø–∏—Å –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å | –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É | –ö–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ |
|:------|:----|:-----|:--------------------|:-------------|:----------------|
| **GET** | `/documents` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ | `X-Login`, `X-Password` | ‚Äî | `200 OK`, `401 Unauthorized` |
| **POST** | `/documents` | –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç | `X-Login`, `X-Password` | `{ "title": "string", "content": "string" }` | `201 Created`, `400 Bad Request`, `401 Unauthorized` |
| **DELETE** | `/documents/:id` | –í–∏–¥–∞–ª–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç | `X-Login`, `X-Password` | ‚Äî | `204 No Content`, `404 Not Found`, `401 Unauthorized` |
| **GET** | `/employees` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ (–∞–¥–º—ñ–Ω) | `X-Login`, `X-Password` | ‚Äî | `200 OK`, `401 Unauthorized`, `403 Forbidden` |

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–∞ –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø–∏—Ç—É:

```text
X-Login: user1
X-Password: password123
```

### –†–æ–ª—ñ:
- **user** ‚Äî –º–∞—î –¥–æ—Å—Ç—É–ø –ª–∏—à–µ –¥–æ `/documents`.
- **admin** ‚Äî –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤, –≤–∫–ª—é—á–Ω–æ –∑ `/employees`.

---

## üßæ Middleware

| –ù–∞–∑–≤–∞ | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:------|:-------------|
| `authMiddleware` | –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ª–æ–≥—ñ–Ω —ñ –ø–∞—Ä–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –¥–æ–¥–∞—î `req.user` |
| `adminOnlyMiddleware` | –û–±–º–µ–∂—É—î –¥–æ—Å—Ç—É–ø –ª–∏—à–µ –¥–ª—è —Ä–æ–ª—ñ `admin` |
| `loggingMiddleware` | –í–∏–≤–æ–¥–∏—Ç—å —É –∫–æ–Ω—Å–æ–ª—å –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç —É —Ñ–æ—Ä–º–∞—Ç—ñ `[—á–∞—Å] –ú–ï–¢–û–î URL` |

–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:
```
[2025-09-21T11:55:10.123Z] GET /documents
[2025-09-21T11:55:15.456Z] GET /employees
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

### 1Ô∏è‚É£ –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
–ü–µ—Ä–µ–π—Ç–∏ –∑–∞ –∞–¥—Ä–µ—Å–æ—é `http://localhost:3000/documents` ‚Üí –æ—á—ñ–∫—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞ `401 Unauthorized`.

### 2Ô∏è‚É£ –ß–µ—Ä–µ–∑ Postman
–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é —ñ–∑ –∑–∞–ø–∏—Ç–∞–º–∏:
- –£—Å–ø—ñ—à–Ω–∏–π –∑–∞–ø–∏—Ç `GET /documents` (—Ä–æ–ª—å `user`)
- –£—Å–ø—ñ—à–Ω–∏–π –∑–∞–ø–∏—Ç `GET /employees` (—Ä–æ–ª—å `admin`)
- –í—ñ–¥–º–æ–≤–∏ `401`, `403`, `404` –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –∞–±–æ URL

### 3Ô∏è‚É£ –ß–µ—Ä–µ–∑ Node.js-—Å–∫—Ä–∏–ø—Ç
–§–∞–π–ª **test-client.js** –≤–∏–∫–æ–Ω—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ API:

```bash
npm test
```

–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:
```
--- Running API Tests ---
[TEST 1] Getting documents as a user... ‚Üí Status: 200
[TEST 2] Trying to get employees as a user... ‚Üí Status: 403
[TEST 3] Getting employees as an admin... ‚Üí Status: 200
--- Tests finished ---
```

---

## üì¶ package.json

```json
{
  "dependencies": {
    "express": "^4.19.0"
  },
  "scripts": {
    "start": "node server.js",
    "test": "node test-client.js"
  }
}
```

---

## üß∞ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

| –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|:------------|:-------------|
| **Node.js** | –í–∏–∫–æ–Ω–∞–Ω–Ω—è JavaScript –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ |
| **Express.js** | –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è REST API |
| **Postman** | –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API |
| **Git + GitHub** | –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å—ñ–π —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ–¥—É |

---

## üì∏ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
–î–æ–¥–∞–π—Ç–µ —É –ø–∞–ø–∫—É `/docs` –∞–±–æ README.md —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏ –∑ Postman, —â–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å:
- —É—Å–ø—ñ—à–Ω—ñ –∑–∞–ø–∏—Ç–∏ `GET`, `POST`, `DELETE`;
- –ø–æ–º–∏–ª–∫–∏ `401`, `403`, `404`.

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä
**–ó–æ—Ç–æ–≤ –ê.–û.**  
*–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ-–ø—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ3 ‚Äî Secure REST API*
